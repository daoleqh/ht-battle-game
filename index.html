<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&display=swap" rel="stylesheet">
  <title>Nass War: HT Challenge</title>
  <link rel="stylesheet" href="css/game.css">
  <link rel="icon" type="image/png" href="img/icon.png">
  <script>
    function setRealVh() {
      const vh = window.innerHeight * 0.01;
      document.documentElement.style.setProperty('--vh', `${vh}px`);
    }
    window.addEventListener('resize', setRealVh);
    window.addEventListener('orientationchange', setRealVh);
    window.addEventListener('load', setRealVh);
  </script>  
</head>
<body>
  <div id="wrapper">
  <!-- Logo -->
  <img src="img/nasswar.png" alt="Nass War: HT Challenge" id="title-img">

  <div id="game-container" class="mobile-height">
    <!-- HUD -->
    <div class="hud-container">
      <div id="scoreboard" class="hud-block">
        <span class="label">Enemies Defeated:</span>
        <span id="score">0</span>
      </div>
      <div id="timer" class="hud-block">
        <span class="label">Time Left:</span>
        <span id="time-left">90s</span>
      </div>
      <button id="restart-btn" title="Restart">üîÑ</button>
      <button id="sound-btn" title="Toggle Sound">üîä</button>
    </div>

    <!-- Walls & Game Elements -->
    <div id="walls"></div>
    <img id="result-img" src="" alt="result">

    <!-- Credits -->
    <div class="footer-left">¬© Nass.</div>
    <div class="footer-right">Discord: nass.le</div>
  </div>

  <button id="btn-fire">üî´</button>

  <!-- N√∫t v√†o fullscreen cho ƒëi·ªán tho·∫°i (n·∫øu c·∫ßn) -->
  <script>
    function requestFullscreen() {
      const docElm = document.documentElement;
      if (docElm.requestFullscreen) {
        docElm.requestFullscreen();
      } else if (docElm.webkitRequestFullscreen) {
        docElm.webkitRequestFullscreen();
      } else if (docElm.msRequestFullscreen) {
        docElm.msRequestFullscreen();
      }
    }

    function isFullscreen() {
      return document.fullscreenElement || document.webkitFullscreenElement || document.msFullscreenElement;
    }

    function ensureFullscreen() {
      if (!isFullscreen()) {
        requestFullscreen();
      }
    }

    if (/Mobi|Android|iPhone/i.test(navigator.userAgent)) {
      window.addEventListener('click', ensureFullscreen);
      window.addEventListener('touchstart', ensureFullscreen);
    }
  </script>

  <script src="js/game.js"></script>
  <script>
    const isMobileDevice = /Mobi|Android|iPhone|iPad/i.test(navigator.userAgent);
    const hasTouch = navigator.maxTouchPoints > 0;
    if (!(isMobileDevice && hasTouch)) {
      document.documentElement.classList.add('not-touch');
    }
  </script>  

<script>
  // Thi·∫øt l·∫≠p chi·ªÅu cao th·ª±c t·∫ø khi load
  function setGameHeight() {
    const container = document.getElementById('game-container');
    if (container && /Mobi|Android|iPhone/i.test(navigator.userAgent)) {
      container.style.height = window.innerHeight + 'px';
    }
  }
  window.addEventListener('load', setGameHeight);
  window.addEventListener('resize', setGameHeight);
  window.addEventListener('orientationchange', setGameHeight);
</script>

  </div>
  <script>
    function setGameHeight() {
      const container = document.getElementById('game-container');
      if (container && /Mobi|Android|iPhone/i.test(navigator.userAgent)) {
        container.style.height = window.innerHeight + 'px';
      }
    }
    window.addEventListener('load', setGameHeight);
    window.addEventListener('resize', setGameHeight);
    window.addEventListener('orientationchange', setGameHeight);
  </script>
  <div id="joystick-zone" style="display: none;">
    <div id="joystick-base">
      <div id="joystick-knob"></div>
    </div>
  </div>  
</body>
</html>
